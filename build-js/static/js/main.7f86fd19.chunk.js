(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports={canvas:"MandelbrotVisualizer_canvas__M7Er-"}},12:function(e,t,n){e.exports={container:"RenderOptions_container__2GIEw"}},13:function(e,t,n){e.exports=n(24)},18:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(9),o=n.n(r),s=(n(18),n(1)),u=n(2),c=n(5),h=n(4),l=n(6),v=n(7),d=n.n(v),m=n(10),g=function(e){return new Promise(function(t){return setTimeout(t,e)})},C=function(){function e(t,n){Object(s.a)(this,e),this.a=t,this.b=n}return Object(u.a)(e,[{key:"square",value:function(){return new e(Math.pow(this.a,2)-Math.pow(this.b,2),2*this.a*this.b)}},{key:"add",value:function(t){return new e(this.a+t.a,this.b+t.b)}},{key:"hasEscaped",value:function(){return Math.abs(this.a+this.b)>16}},{key:"getA",value:function(){return this.a}},{key:"getB",value:function(){return this.b}}]),e}();function f(e,t,n,a,i){return a+(e-t)/(n-t)*(i-a)}var w,A,p=function(){function e(t,n,a){Object(s.a)(this,e),this.red=t,this.green=n,this.blue=a}return Object(u.a)(e,[{key:"getR",value:function(){return Math.round(255*this.red)}},{key:"getG",value:function(){return Math.round(255*this.green)}},{key:"getB",value:function(){return Math.round(255*this.blue)}}],[{key:"colorBetween",value:function(t,n,a){return new e(t.red+a*(n.red-t.red),t.green+a*(n.green-t.green),t.blue+a*(n.blue-t.blue))}},{key:"fromRGB",value:function(t,n,a){return new e(t/255,n/255,a/255)}}]),e}(),b=n(3);!function(e){e[e.GRAY_SCALE=0]="GRAY_SCALE",e[e.CYCLIC_GRAY_SCALE=1]="CYCLIC_GRAY_SCALE",e[e.RED_CYAN=2]="RED_CYAN",e[e.BLUE_GOLD=3]="BLUE_GOLD",e[e.EARTH_AND_SKY=4]="EARTH_AND_SKY",e[e.HOT_AND_COLD=5]="HOT_AND_COLD",e[e.FIRE=6]="FIRE",e[e.TREE_COLORS=7]="TREE_COLORS",e[e.SEA_SHORE=8]="SEA_SHORE",e[e.RANDOM=9]="RANDOM"}(A||(A={}));var x=(w={},Object(b.a)(w,A.GRAY_SCALE,function(){return{divisionPoints:[0,1],colors:[new p(1,1,1),new p(0,0,0)]}}),Object(b.a)(w,A.CYCLIC_GRAY_SCALE,function(){return{divisionPoints:[0,.5,1],colors:[new p(0,0,0),new p(1,1,1),new p(0,0,0)]}}),Object(b.a)(w,A.RED_CYAN,function(){return{divisionPoints:[0,.5,1],colors:[new p(1,0,0),new p(0,1,1),new p(1,0,0)]}}),Object(b.a)(w,A.BLUE_GOLD,function(){return{divisionPoints:[0,.5,1],colors:[new p(.1,.1,1),new p(1,.6,0),new p(.3,.3,1)]}}),Object(b.a)(w,A.EARTH_AND_SKY,function(){return{divisionPoints:[0,.15,.33,.67,.85,1],colors:[new p(1,1,1),new p(1,.8,0),new p(.53,.12,.075),new p(0,0,.6),new p(0,.4,1),new p(1,1,1)]}}),Object(b.a)(w,A.HOT_AND_COLD,function(){return{divisionPoints:[0,.16,.5,.84,1],colors:[new p(1,1,1),new p(0,.4,1),new p(.2,.2,.2),new p(1,0,.8),new p(1,1,1)]}}),Object(b.a)(w,A.FIRE,function(){return{divisionPoints:[0,.17,.83,1],colors:[new p(0,0,0),new p(1,0,0),new p(1,1,0),new p(1,1,1)]}}),Object(b.a)(w,A.SEA_SHORE,function(){return{divisionPoints:[0,.1667,.3333,.5,.6667,.8333,1],colors:[new p(.7909,.9961,.763),new p(.8974,.8953,.6565),new p(.9465,.3161,.1267),new p(.5184,.1109,.0917),new p(.0198,.4563,.6839),new p(.5385,.8259,.8177),new p(.7909,.9961,.76)]}}),w),E=function(){function e(t,n){Object(s.a)(this,e),this.divisionPoints=t,this.divisionColors=n}return Object(u.a)(e,[{key:"getNearestDivisionPoint",value:function(e){for(var t=1;e>this.divisionPoints[t];)t++;return t}},{key:"getColor",value:function(e){var t=this.getNearestDivisionPoint(e),n=this.divisionPoints[t-1],a=(e-n)/(this.divisionPoints[t]-n);return p.colorBetween(this.divisionColors[t-1],this.divisionColors[t],a)}}],[{key:"createStandardPalette",value:function(t){var n=x[t]();return new e(n.divisionPoints,n.colors)}}]),e}().createStandardPalette(A.EARTH_AND_SKY);function y(e,t){return E.getColor(f(e,0,t,0,1))}var R=function(){function e(t,n,a){Object(s.a)(this,e),this.imageData=t.createImageData(n,a),this.width=n,this.height=a;var i=new ArrayBuffer(this.imageData.data.length);this.buf8=new Uint8ClampedArray(i),this.data=new Uint32Array(i)}return Object(u.a)(e,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"setColor",value:function(e,t,n){this.setCanvasPixel(e,t,n)}},{key:"toImageData",value:function(){return this.imageData.data.set(this.buf8),this.imageData}},{key:"colorToBuffer",value:function(e,t,n){return(arguments.length>3&&void 0!==arguments[3]?arguments[3]:255)<<24|n<<16|t<<8|e}},{key:"setCanvasPixel",value:function(e,t,n){var a=t*this.width+e;this.data[a]=this.colorToBuffer(n.getR(),n.getG(),n.getB())}}]),e}(),k=function(){function e(t,n){Object(s.a)(this,e),this.width=t,this.height=n;var a=this.height/this.width;this.maxCorner=new C(3,3*a),this.minCorner=new C(-3,-3*a),this.canvasPixelDrawer=null}return Object(u.a)(e,[{key:"minCornerA",value:function(){return this.minCorner.getA().toString()}},{key:"minCornerB",value:function(){return this.minCorner.getB().toString()}},{key:"maxCornerA",value:function(){return this.maxCorner.getA().toString()}},{key:"maxCornerB",value:function(){return this.maxCorner.getB().toString()}},{key:"zoomCanvas",value:function(e,t,n,a){var i=f(e,0,this.width,this.minCorner.getA(),this.maxCorner.getA()),r=f(t,0,this.width,this.minCorner.getA(),this.maxCorner.getA()),o=f(n,0,this.height,this.minCorner.getB(),this.maxCorner.getB()),s=f(a,0,this.height,this.minCorner.getB(),this.maxCorner.getB());this.minCorner=new C(i,o),this.maxCorner=new C(r,s)}},{key:"iterationsUntilItEscapes",value:function(e,t){for(var n=new C(0,0),a=0;a<t;a++)if((n=n.square().add(e)).hasEscaped())return a;return t}},{key:"getDataStorage",value:function(e){return this.canvasPixelDrawer||(this.canvasPixelDrawer=new R(e,this.width,this.height)),this.canvasPixelDrawer}},{key:"render",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=this.minCorner,a=this.maxCorner,i=this.getDataStorage(e),r=0;r<i.getHeight();r++)for(var o=0;o<i.getWidth();o++){var s=new C(f(o,0,i.getWidth(),n.getA(),a.getA()),f(r,0,i.getHeight(),n.getB(),a.getB())),u=y(this.iterationsUntilItEscapes(s,t),t);i.setColor(o,r,u)}e.putImageData(i.toImageData(),0,0)}}]),e}(),O=function(){function e(t){Object(s.a)(this,e),this.originalCanvas=t,this.originalCanvasCtx=t.getContext("2d"),this.backupCanvas=this.setupBackupCanvas(),this.backupCanvasCtx=this.backupCanvas.getContext("2d")}return Object(u.a)(e,[{key:"setupBackupCanvas",value:function(){var e=document.createElement("canvas");return e.width=this.originalCanvas.width,e.height=this.originalCanvas.height,e}},{key:"save",value:function(){this.backupCanvasCtx.drawImage(this.originalCanvas,0,0)}},{key:"restore",value:function(){this.originalCanvasCtx.drawImage(this.backupCanvas,0,0)}}]),e}(),S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).onRef=function(e){n.canvas=e,n.canvasCtx=n.canvas.getContext("2d"),n.canvasBackup=new O(n.canvas),n.canvasRatio=n.canvas.height/n.canvas.width,n.props.innerRef(e)},n.handleMouseDown=function(e){n.mouseIsDown=!0,n.originX=e.pageX,n.originY=e.pageY,n.canvasBackup.save()},n.handleMouseUp=function(){n.mouseIsDown=!1,n.props.onChangeSelectedRegion(n.selectedAreaStartX,n.selectedAreaEndX,n.selectedAreaStartY,n.selectedAreaEndY)},n.handleMouseMove=function(e){n.mouseIsDown&&(n.mouseX=e.pageX,n.mouseY=e.pageY,n.calculateSelectionArea(),n.canvasBackup.restore(),n.drawRawRect(),n.drawFixedRect())},n.canvas=null,n.canvasCtx=null,n.canvasBackup=null,n.canvasRatio=null,n.originX=0,n.originY=0,n.mouseX=0,n.mouseY=0,n.selectedAreaStartX=0,n.selectedAreaEndX=0,n.selectedAreaStartY=0,n.selectedAreaEndY=0,n.mouseIsDown=!1,n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"calculateSelectionArea",value:function(){var e=this.mouseX-this.originX,t=this.mouseY-this.originY,n=Math.min(e,t/this.canvasRatio),a=Math.min(t,e*this.canvasRatio),i=(e-n)/2,r=(t-a)/2,o=n,s=a;this.selectedAreaStartX=this.originX+i,this.selectedAreaStartY=this.originY+r,this.selectedAreaEndX=this.selectedAreaStartX+o,this.selectedAreaEndY=this.selectedAreaStartY+s}},{key:"drawRawRect",value:function(){this.drawRect("#00FF00",this.originX,this.mouseX,this.originY,this.mouseY)}},{key:"drawFixedRect",value:function(){this.drawRect("#FF0000",this.selectedAreaStartX,this.selectedAreaEndX,this.selectedAreaStartY,this.selectedAreaEndY)}},{key:"drawRect",value:function(e,t,n,a,i){this.canvasCtx.strokeStyle=e,this.canvasCtx.strokeRect(t,a,n-t,i-a)}},{key:"render",value:function(){return i.a.createElement("canvas",{ref:this.onRef,width:window.innerWidth,height:window.innerHeight,className:this.props.className,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove})}}]),t}(a.Component),D=n(11),B=n.n(D),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).onRef=function(e){n.canvasCtx=e.getContext("2d"),n.mandelbrotSet=new k(e.width,e.height),n.refreshCanvas()},n.onChangeSelectedRegion=function(e,t,a,i){n.mandelbrotSet.zoomCanvas(e,t,a,i),n.refreshCanvas()},n.mandelbrotSet=null,n.canvasCtx=null,n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){e.renderingKey!==this.props.renderingKey&&this.refreshCanvas()}},{key:"refreshCanvas",value:function(){var e=Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.onChangeBounds(this.mandelbrotSet.minCornerA(),this.mandelbrotSet.minCornerB(),this.mandelbrotSet.maxCornerA(),this.mandelbrotSet.maxCornerB()),e.next=3,g(50);case 3:console.time("RENDER"),this.mandelbrotSet.render(this.canvasCtx,this.props.maxIterations),console.timeEnd("RENDER");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement(S,{innerRef:this.onRef,className:B.a.canvas,onChangeSelectedRegion:this.onChangeSelectedRegion})}}]),t}(a.Component),j=n(12),Y=n.n(j),I=function(e){var t=e.onChangeMaxIterations,n=e.maxIterations,i=e.minCornerA,r=e.minCornerB,o=e.maxCornerA,s=e.maxCornerB,u=e.refresh;return a.createElement("form",{className:Y.a.container,onSubmit:function(e){e.preventDefault(),u()}},a.createElement("div",null,a.createElement("input",{type:"text",value:i}),a.createElement("input",{type:"text",value:r})),a.createElement("div",null,a.createElement("input",{type:"text",value:o}),a.createElement("input",{type:"text",value:s})),a.createElement("input",{type:"number",onChange:function(e){return t(parseInt(e.target.value))},value:n}),a.createElement("input",{type:"submit",value:"Refresh"}))},M=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={maxIterations:100,renderingKey:Math.random(),minCornerA:"",minCornerB:"",maxCornerA:"",maxCornerB:""},n.onChangeMaxIterations=function(e){n.setState({maxIterations:e})},n.refresh=function(){n.setState({renderingKey:Math.random()})},n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(_,{renderingKey:this.state.renderingKey,maxIterations:this.state.maxIterations,onChangeBounds:function(t,n,a,i){return e.setState({minCornerA:t,minCornerB:n,maxCornerA:a,maxCornerB:i})}}),i.a.createElement(I,{onChangeMaxIterations:this.onChangeMaxIterations,maxIterations:this.state.maxIterations,refresh:this.refresh,minCornerA:this.state.minCornerA,minCornerB:this.state.minCornerB,maxCornerA:this.state.maxCornerA,maxCornerB:this.state.maxCornerB}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.7f86fd19.chunk.js.map
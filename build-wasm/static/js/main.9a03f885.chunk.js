(this.webpackJsonpmandelbrot=this.webpackJsonpmandelbrot||[]).push([[0],{11:function(e,t,n){e.exports={canvas:"MandelbrotVisualizer_canvas__hswg-"}},12:function(e,t,n){e.exports={container:"RenderOptions_container__U4epK"}},13:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),s=n.n(i),o=(n(18),n(8)),c=n(1),u=n.n(c),h=n(2),l=n(3),v=n(4),d=n(6),m=n(5),p=n(7),f=function(e){return new Promise((function(t){return setTimeout(t,e)}))},C=function(){function e(t){Object(l.a)(this,e),this.originalCanvas=void 0,this.originalCanvasCtx=void 0,this.backupCanvas=void 0,this.backupCanvasCtx=void 0,this.originalCanvas=t,this.originalCanvasCtx=t.getContext("2d"),this.backupCanvas=this.setupBackupCanvas(),this.backupCanvasCtx=this.backupCanvas.getContext("2d")}return Object(v.a)(e,[{key:"setupBackupCanvas",value:function(){var e=document.createElement("canvas");return e.width=this.originalCanvas.width,e.height=this.originalCanvas.height,e}},{key:"save",value:function(){this.backupCanvasCtx.drawImage(this.originalCanvas,0,0)}},{key:"restore",value:function(){this.originalCanvasCtx.drawImage(this.backupCanvas,0,0)}}]),e}(),w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).canvas=void 0,n.canvasCtx=void 0,n.canvasBackup=void 0,n.canvasRatio=void 0,n.originX=void 0,n.originY=void 0,n.mouseX=void 0,n.mouseY=void 0,n.selectedAreaStartX=void 0,n.selectedAreaEndX=void 0,n.selectedAreaStartY=void 0,n.selectedAreaEndY=void 0,n.mouseIsDown=void 0,n.onRef=function(e){n.canvas=e,n.canvasCtx=n.canvas.getContext("2d"),n.canvasBackup=new C(n.canvas),n.canvasRatio=n.canvas.height/n.canvas.width,n.props.innerRef(e)},n.handleMouseDown=function(e){n.mouseIsDown=!0,n.originX=e.pageX,n.originY=e.pageY,n.canvasBackup.save()},n.handleMouseUp=function(){n.mouseIsDown=!1,n.props.onChangeSelectedRegion(n.selectedAreaStartX,n.selectedAreaEndX,n.selectedAreaStartY,n.selectedAreaEndY)},n.handleMouseMove=function(e){n.mouseIsDown&&(n.mouseX=e.pageX,n.mouseY=e.pageY,n.calculateSelectionArea(),n.canvasBackup.restore(),n.drawRawRect(),n.drawFixedRect())},n.canvas=null,n.canvasCtx=null,n.canvasBackup=null,n.canvasRatio=null,n.originX=0,n.originY=0,n.mouseX=0,n.mouseY=0,n.selectedAreaStartX=0,n.selectedAreaEndX=0,n.selectedAreaStartY=0,n.selectedAreaEndY=0,n.mouseIsDown=!1,n}return Object(p.a)(t,e),Object(v.a)(t,[{key:"calculateSelectionArea",value:function(){var e=this.mouseX-this.originX,t=this.mouseY-this.originY,n=Math.min(e,t/this.canvasRatio),a=Math.min(t,e*this.canvasRatio),r=(e-n)/2,i=(t-a)/2,s=n,o=a;this.selectedAreaStartX=this.originX+r,this.selectedAreaStartY=this.originY+i,this.selectedAreaEndX=this.selectedAreaStartX+s,this.selectedAreaEndY=this.selectedAreaStartY+o}},{key:"drawRawRect",value:function(){this.drawRect("#00FF00",this.originX,this.mouseX,this.originY,this.mouseY)}},{key:"drawFixedRect",value:function(){this.drawRect("#FF0000",this.selectedAreaStartX,this.selectedAreaEndX,this.selectedAreaStartY,this.selectedAreaEndY)}},{key:"drawRect",value:function(e,t,n,a,r){this.canvasCtx.strokeStyle=e,this.canvasCtx.strokeRect(t,a,n-t,r-a)}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.onRef,width:window.innerWidth,height:window.innerHeight,className:this.props.className,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove})}}]),t}(a.Component),x=function(){function e(t,a){var r=this;Object(l.a)(this,e),this.wasmInstance=void 0,this.importPromise=void 0,this.wasmInstance=null,this.importPromise=n.e(3).then(n.bind(null,21)).then((function(e){var n=e.MandelbrotSet;r.wasmInstance=new n(t,a)}))}return Object(v.a)(e,[{key:"isInitialized",value:function(){return Boolean(this.wasmInstance)}},{key:"initialized",value:function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitialized()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.importPromise;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"minCornerA",value:function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initialized();case 2:return e.abrupt("return",this.wasmInstance.min_corner_a());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"minCornerB",value:function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initialized();case 2:return e.abrupt("return",this.wasmInstance.min_corner_b());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maxCornerA",value:function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initialized();case 2:return e.abrupt("return",this.wasmInstance.max_corner_a());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maxCornerB",value:function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initialized();case 2:return e.abrupt("return",this.wasmInstance.max_corner_b());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"zoomCanvas",value:function(){var e=Object(h.a)(u.a.mark((function e(t,n,a,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initialized();case 2:this.wasmInstance.zoom_canvas(t,n,a,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(h.a)(u.a.mark((function e(){var t,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:100,e.next=3,this.initialized();case 3:return e.abrupt("return",this.wasmInstance.render(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),b=n(11),g=n.n(b),k=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).mandelbrotSet=void 0,n.canvas=void 0,n.canvasCtx=void 0,n.onRef=function(e){n.canvas=e,n.canvasCtx=e.getContext("2d"),n.mandelbrotSet=new x(e.width,e.height),n.refreshCanvas()},n.onChangeSelectedRegion=function(e,t,a,r){n.mandelbrotSet.zoomCanvas(e,t,a,r).then((function(){n.refreshCanvas()}))},n.mandelbrotSet=null,n.canvasCtx=null,n.canvas=null,n}return Object(p.a)(t,e),Object(v.a)(t,[{key:"componentDidUpdate",value:function(e){e.renderingKey!==this.props.renderingKey&&this.refreshCanvas()}},{key:"refreshCanvas",value:function(){var e=Object(h.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.props,e.next=3,this.mandelbrotSet.minCornerA();case 3:return e.t1=e.sent,e.next=6,this.mandelbrotSet.minCornerB();case 6:return e.t2=e.sent,e.next=9,this.mandelbrotSet.maxCornerA();case 9:return e.t3=e.sent,e.next=12,this.mandelbrotSet.maxCornerB();case 12:return e.t4=e.sent,e.t5={minCornerA:e.t1,minCornerB:e.t2,maxCornerA:e.t3,maxCornerB:e.t4},e.t0.onChangeBounds.call(e.t0,e.t5),e.next=17,f(50);case 17:return e.next=19,this.mandelbrotSet.render(this.props.maxIterations);case 19:t=e.sent,n=new ImageData(t,this.canvas.width,this.canvas.height),this.canvasCtx.putImageData(n,0,0);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(w,{innerRef:this.onRef,className:g.a.canvas,onChangeSelectedRegion:this.onChangeSelectedRegion})}}]),t}(a.Component),y=n(12),A=n.n(y),S=function(e){var t=e.onChangeMaxIterations,n=e.maxIterations,a=e.corners,i=e.refresh;return r.a.createElement("form",{className:A.a.container,onSubmit:function(e){e.preventDefault(),i()}},r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a.minCornerA}),r.a.createElement("input",{type:"text",value:a.minCornerB})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a.maxCornerA}),r.a.createElement("input",{type:"text",value:a.maxCornerB})),r.a.createElement("input",{type:"number",onChange:function(e){return t(parseInt(e.target.value))},value:n}),r.a.createElement("input",{type:"submit",value:"Refresh"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement((function(){var e=Object(a.useState)(100),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(Math.random()),c=Object(o.a)(s,2),u=c[0],h=c[1],l=Object(a.useState)({minCornerA:"",minCornerB:"",maxCornerA:"",maxCornerB:""}),v=Object(o.a)(l,2),d=v[0],m=v[1];return r.a.createElement("div",null,r.a.createElement(k,{renderingKey:u,maxIterations:n,onChangeBounds:m}),r.a.createElement(S,{onChangeMaxIterations:i,maxIterations:n,refresh:function(){return h(Math.random())},corners:d}))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.9a03f885.chunk.js.map